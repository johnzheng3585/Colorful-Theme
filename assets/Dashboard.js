import{E as M,u as G,n as P,p as y,r as v,a as Z,k as K,c as l,b as s,e as c,l as Y,t as o,d as u,m as C,f as L,F as x,y as $,w as R,j as N,h as ss,o as n,v as ts}from"./index.js";import{a as es,g as os,b as as}from"./user.js";import{d as q,C as B,a as is}from"./marked.esm.js";import{_ as ns}from"./_plugin-vue_export-helper.js";import{A as rs}from"./activity.js";import{R as ls}from"./refresh-cw.js";import{Z as cs}from"./zap.js";import{c as ds}from"./createLucideIcon.js";import{C as us}from"./copy.js";/**
 * @license lucide-vue-next v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j=ds("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]),ms={class:"dark-tech-dashboard animate-fade-in"},hs={class:"bento-grid"},ps={class:"subscription-hero glass-card bento-item lg:col-span-8"},vs={key:0,class:"hero-content"},bs={class:"user-meta"},gs={class:"user-titles"},_s={class:"greeting"},fs={class:"plan-tag"},ks={class:"metric-grid"},ws={class:"metric-item glass-card"},Ss={class:"m-header"},ys={class:"m-label"},Cs={class:"m-value"},xs={key:0,class:"m-footer"},$s={class:"m-subtext"},Ns={class:"metric-item glass-card"},Ds={class:"m-header"},Is={class:"m-label"},Os={class:"m-value"},Ts={class:"m-footer"},zs={class:"m-subtext"},Ls={class:"metric-item glass-card highlight"},Rs={class:"m-header"},qs={class:"m-label"},Bs={class:"m-value text-primary"},js={class:"m-footer"},Ms={class:"m-subtext"},As={class:"notification-wall glass-card bento-item lg:col-span-4"},Fs={class:"card-header"},Js={key:0,class:"notice-list"},Qs=["onClick"],Us={class:"n-body"},Vs={class:"n-title"},Ws={class:"n-time"},Xs={key:1,class:"notice-empty"},Hs={class:"subscribe-section glass-card bento-item lg:col-span-12"},Es={class:"sub-layout"},Gs={class:"sub-left"},Ps={class:"sub-section"},Zs={class:"link-input-group"},Ks=["value"],Ys={class:"sub-section"},st={class:"quick-icons"},tt={class:"qr-code-box"},et={class:"sub-right"},ot={class:"client-downloads"},at=["href"],it=["src","alt"],nt={class:"dl-info"},rt={class:"dl-name"},lt={class:"dl-platform"},ct={class:"modal-title-custom"},dt={class:"title-icon"},ut={class:"title-text"},mt={class:"promo-card"},ht={class:"promo-header"},pt=["innerHTML"],vt={class:"promo-body"},bt={class:"promo-desc"},gt={key:0,class:"promo-code-box"},_t={class:"code-label"},ft={class:"code-val"},kt={key:0,class:"promo-action"},wt=["innerHTML"],St={class:"notice-detail-footer"},yt={class:"info-badge"},Ct={components:{AQrcode:M}},xt=Object.assign(Ct,{__name:"Dashboard",setup($t){q.setOptions({breaks:!0,gfm:!0,headerIds:!0,mangle:!1});const A=ss(),{t:k}=G(),F=P(),J=y(()=>F.theme==="dark"),i=v(null),b=Z({email:""}),w=v({}),g=v([]),m=v(null),_=v(!1),d=y(()=>{var e;if(!((e=m.value)!=null&&e.content))return null;try{const t=m.value.content.trim();if(t.startsWith("{")&&t.endsWith("}")){const r=JSON.parse(t);if(r&&r.cardComponent)return r}}catch{}return null}),Q=y(()=>{var e;if(!((e=m.value)!=null&&e.content)||d.value)return"";try{return q.parse(m.value.content)}catch(t){return console.error("Markdown parsing error:",t),m.value.content}}),U=e=>{m.value=e,_.value=!0},V=e=>{e&&(e.startsWith("http")?window.open(e,"_blank"):(A.push(e),_.value=!1))};K(async()=>{W(),X();try{const t=await(await fetch("/clientConfig.json")).json();w.value=t.downloads}catch{w.value={windows_android:{title:"Windows / Android",clients:[{name:"Clash Verge",platform:"Windows",icon:"https://github.com/dc8683/picx-images-hosting/raw/master/rocket/Clash.9gwri62wr1.webp",url:"https://clashverge.dev/"},{name:"Surfboard",platform:"Android",icon:"https://github.com/dc8683/picx-images-hosting/raw/master/rocket/Surfboard.8vn3vv8ggg.svg",url:"https://manual.getsurfboard.com/"}]},macos_ios:{title:"macOS / iOS",clients:[{name:"Clash Verge",platform:"macOS",icon:"https://github.com/dc8683/picx-images-hosting/raw/master/rocket/Clash.9gwri62wr1.webp",url:"https://clashverge.dev/"},{name:"Shadowrocket",platform:"iOS",icon:"https://github.com/dc8683/picx-images-hosting/raw/master/rocket/Shadowrocket.8z6ptl1j67.webp",url:"https://apps.apple.com/app/shadowrocket/id932747118"}]}}}});const W=()=>{try{const e=localStorage.getItem("xboard_subscribe_info");e&&(i.value=JSON.parse(e));const t=localStorage.getItem("xboard_user_info");t&&Object.assign(b,JSON.parse(t));const r=localStorage.getItem("xboard_notices");r&&(g.value=JSON.parse(r))}catch(e){console.error("Dashboard cache load error:",e)}},X=async()=>{try{const[e,t,r]=await Promise.all([es(),os(),as()]);e.data&&(i.value=e.data,localStorage.setItem("xboard_subscribe_info",JSON.stringify(e.data))),t.data&&(Object.assign(b,t.data),localStorage.setItem("xboard_user_info",JSON.stringify(t.data))),r.data&&(g.value=r.data,localStorage.setItem("xboard_notices",JSON.stringify(r.data)))}catch{}},H=e=>!e||e<=0?"0 GB":(e/1024**3).toFixed(2)+" GB",E=()=>{var e;(e=i.value)!=null&&e.subscribe_url&&(navigator.clipboard.writeText(i.value.subscribe_url),N.success(k("dashboard.home.copySuccess")))},h=e=>{var f;if(!((f=i.value)!=null&&f.subscribe_url)){N.warning(k("dashboard.home.linkNotReady"));return}const t=encodeURIComponent(i.value.subscribe_url),r={clash:`clash://install-config?url=${t}`,shadowrocket:`shadowrocket://add/sub://${btoa(i.value.subscribe_url)}?remarks=${encodeURIComponent(b.email||"Xboard")}`,"quantumult-x":`quantumult-x:///add-resource?remote-resource=%7B%22server_remote%22:%5B%22${t},tag=Xboard%22%5D%7D`,singbox:`sing-box://import-remote-profile?url=${t}`,surfboard:`surfboard:///install-config?url=${t}`,surge:`surge:///install-config?url=${t}`};r[e]&&(window.location.href=r[e],N.success(k("dashboard.home.jumpingToClient")))};return(e,t)=>{var D,I,O,T,z;const r=L("a-skeleton"),f=L("a-modal");return n(),l("div",ms,[s("div",hs,[s("div",ps,[t[8]||(t[8]=s("div",{class:"mesh-glow"},null,-1)),i.value?(n(),l("div",vs,[s("div",bs,[s("div",gs,[s("span",_s,o(e.$t("dashboard.home.greeting",{name:((D=b.email)==null?void 0:D.split("@")[0])||"User"})),1),s("div",fs,[c(u(rs),{size:14}),s("span",null,o(((I=i.value.plan)==null?void 0:I.name)||e.$t("dashboard.home.noPlan")),1)])])]),s("div",ks,[s("div",ws,[s("div",Ss,[c(u(B),{size:18,class:"text-accent-purple"}),s("span",ys,o(e.$t("dashboard.home.expireTime")),1)]),s("span",Cs,o(i.value.expired_at?new Date(i.value.expired_at*1e3).toLocaleDateString():e.$t("dashboard.home.forever")),1),i.value.expired_at?(n(),l("div",xs,[s("span",$s,o(Math.ceil((i.value.expired_at-Date.now()/1e3)/(24*3600)))+" "+o(e.$t("dashboard.home.daysLaterReset")),1)])):C("",!0)]),s("div",Ns,[s("div",Ds,[c(u(ls),{size:18,class:"text-accent-blue"}),s("span",Is,o(e.$t("dashboard.home.resetTime")),1)]),s("span",Os,o(e.$t("dashboard.home.resetDate")),1),s("div",Ts,[s("span",zs,o(e.$t("dashboard.home.trafficReset")),1)])]),s("div",Ls,[s("div",Rs,[c(u(cs),{size:18,class:"text-primary"}),s("span",qs,o(e.$t("dashboard.home.remainingTraffic")),1)]),s("span",Bs,o(H(i.value.transfer_enable-(i.value.u+i.value.d))),1),s("div",js,[s("span",Ms,o(e.$t("dashboard.home.availableQuota")),1)])])])])):(n(),Y(r,{key:1,active:"",paragraph:{rows:3}}))]),s("div",As,[s("div",Fs,[c(u(j),{size:18}),s("h3",null,o(e.$t("dashboard.home.importantNotices")),1)]),g.value.length>0?(n(),l("div",Js,[(n(!0),l(x,null,$(g.value,a=>(n(),l("div",{class:"notice-item",key:a.id,onClick:S=>U(a)},[t[9]||(t[9]=s("div",{class:"n-icon"},"ðŸ“Œ",-1)),s("div",Us,[s("span",Vs,o(a.title),1),s("span",Ws,o(new Date(a.created_at*1e3).toLocaleDateString()),1)]),c(u(is),{size:16,class:"n-arrow"})],8,Qs))),128))])):(n(),l("div",Xs,[s("span",null,o(e.$t("dashboard.home.noNotices")),1)]))]),s("div",Hs,[s("div",Es,[s("div",Gs,[s("div",Ps,[s("h4",null,o(e.$t("dashboard.home.subscribeLink")),1),s("div",Zs,[s("input",{readonly:"",value:((O=i.value)==null?void 0:O.subscribe_url)||"https://link.example.com/...",class:"link-input"},null,8,Ks),s("button",{onClick:E,class:"copy-btn"},[c(u(us),{size:16})])])]),s("div",Ys,[s("h4",null,o(e.$t("dashboard.home.oneClickImport")),1),s("div",st,[s("div",{class:"import-item",onClick:t[0]||(t[0]=a=>h("clash"))},[...t[10]||(t[10]=[s("div",{class:"q-icon",title:"Clash"},[s("img",{src:"https://github.com/dc8683/picx-images-hosting/raw/master/rocket/Clash.9gwri62wr1.webp",alt:"Clash"})],-1),s("span",null,"Clash",-1)])]),s("div",{class:"import-item",onClick:t[1]||(t[1]=a=>h("shadowrocket"))},[...t[11]||(t[11]=[s("div",{class:"q-icon",title:"Shadowrocket"},[s("img",{src:"https://github.com/dc8683/picx-images-hosting/raw/master/rocket/Shadowrocket.8z6ptl1j67.webp",alt:"Shadowrocket"})],-1),s("span",null,"Shadowrocket",-1)])]),s("div",{class:"import-item",onClick:t[2]||(t[2]=a=>h("singbox"))},[...t[12]||(t[12]=[s("div",{class:"q-icon",title:"Singbox"},[s("img",{src:"https://github.com/dc8683/picx-images-hosting/raw/master/rocket/Singbox.espc7ryvj.svg",alt:"Singbox"})],-1),s("span",null,"Singbox",-1)])]),s("div",{class:"import-item",onClick:t[3]||(t[3]=a=>h("surfboard"))},[...t[13]||(t[13]=[s("div",{class:"q-icon",title:"Surfboard"},[s("img",{src:"https://github.com/dc8683/picx-images-hosting/raw/master/rocket/Surfboard.8vn3vv8ggg.svg",alt:"Surfboard"})],-1),s("span",null,"Surfboard",-1)])]),s("div",{class:"import-item",onClick:t[4]||(t[4]=a=>h("surge"))},[...t[14]||(t[14]=[s("div",{class:"q-icon",title:"Surge"},[s("img",{src:"https://github.com/dc8683/picx-images-hosting/raw/master/rocket/Surge.8s3hy5fdqo.svg",alt:"Surge"})],-1),s("span",null,"Surge",-1)])]),s("div",{class:"import-item",onClick:t[5]||(t[5]=a=>h("quantumult-x"))},[...t[15]||(t[15]=[s("div",{class:"q-icon",title:"Quantumult X"},[s("img",{src:"https://github.com/dc8683/picx-images-hosting/raw/master/rocket/Quantumult.102cyimf66.webp",alt:"Quantumult X"})],-1),s("span",null,"Quantumult X",-1)])]),s("div",tt,[c(u(M),{value:((T=i.value)==null?void 0:T.subscribe_url)||"https://xboard.link/placeholder",size:88,color:J.value?"#F9FAFB":"#1E293B","bg-color":"transparent",status:(z=i.value)!=null&&z.subscribe_url?"active":"loading"},null,8,["value","color","status"]),s("p",null,o(e.$t("dashboard.home.scanToImport")),1)])])])]),s("div",et,[s("h4",null,o(e.$t("dashboard.home.clientDownload")),1),s("div",ot,[(n(!0),l(x,null,$(w.value,(a,S)=>(n(),l("div",{key:S,class:"platform-group"},[(n(!0),l(x,null,$(a.clients,p=>(n(),l("a",{key:p.name,href:p.url,target:"_blank",class:"download-link"},[s("img",{src:p.icon,alt:p.name},null,8,it),s("div",nt,[s("span",rt,o(p.name),1),s("span",lt,o(p.platform),1)])],8,at))),128))]))),128))])])])])]),c(f,{visible:_.value,"onUpdate:visible":t[7]||(t[7]=a=>_.value=a),footer:null,width:650,class:"notice-modal",centered:""},{title:R(()=>{var a;return[s("div",ct,[s("div",dt,[c(u(j),{size:18})]),s("span",ut,o((a=m.value)==null?void 0:a.title),1)])]}),default:R(()=>{var a;return[t[16]||(t[16]=s("div",{class:"modal-mesh"},null,-1)),d.value?(n(),l("div",{key:0,class:ts(["promo-card-wrapper",d.value.theme||"default"])},[s("div",mt,[s("div",ht,[s("h2",{class:"promo-title",innerHTML:(a=d.value.title)==null?void 0:a.replace(/\\n/g,"<br>")},null,8,pt)]),s("div",vt,[s("p",bt,o(d.value.content),1),d.value.code?(n(),l("div",gt,[s("span",_t,o(e.$t("dashboard.home.recommendCode")),1),s("span",ft,o(d.value.code),1)])):C("",!0)]),d.value.btnText?(n(),l("div",kt,[s("button",{class:"promo-btn",onClick:t[6]||(t[6]=S=>V(d.value.btnRoute))},o(d.value.btnText),1)])):C("",!0)])],2)):(n(),l("div",{key:1,class:"notice-detail-content markdown-body",innerHTML:Q.value},null,8,wt)),s("div",St,[s("div",yt,[c(u(B),{size:12}),s("span",null,o(m.value?new Date(m.value.created_at*1e3).toLocaleString():""),1)])])]}),_:1},8,["visible"])])}}}),Bt=ns(xt,[["__scopeId","data-v-5fbc5955"]]);export{Bt as default};
