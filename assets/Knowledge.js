import{q as N}from"./user.js";import{d as g,C as B,a as D}from"./marked.esm.js";import{_ as V}from"./_plugin-vue_export-helper.js";import{B as f}from"./book-open.js";import{F as x}from"./file-text.js";import{r as v,n as k,o as A,c as o,b as t,k as i,e as d,d as c,t as n,F,x as M,f as w,w as y,i as r,l as T}from"./index.js";import"./createLucideIcon.js";const $={class:"knowledge-page"},E={class:"page-header"},K={class:"header-icon"},O={key:0,class:"knowledge-grid"},H=["onClick"],I={class:"card-icon"},S={class:"card-content"},j={class:"card-title"},q={key:0,class:"card-desc"},R={class:"card-meta"},U={class:"meta-item"},G={key:0,class:"category-tag"},J={class:"card-arrow"},P={key:1,class:"loading-state"},Q={key:2,class:"empty-state"},W={class:"modal-title"},X=["innerHTML"],Y={__name:"Knowledge",setup(Z){g.setOptions({breaks:!0,gfm:!0,headerIds:!0,mangle:!1});const u=v({}),_=v(!0),p=v(!1),l=v(null),h=k(()=>{const e=[];return Object.keys(u.value).forEach(a=>{Array.isArray(u.value[a])&&u.value[a].forEach(m=>{e.push({...m,category:a})})}),e});A(async()=>{try{const e=await N({language:"zh-CN"});e.data&&(u.value=e.data)}catch{}finally{_.value=!1}});const b=e=>e?new Date(e*1e3).toLocaleDateString("zh-CN"):"--",C=k(()=>{var e;if(!((e=l.value)!=null&&e.body))return"";try{return g.parse(l.value.body)}catch(a){return console.error("Markdown parsing error:",a),l.value.body}}),z=e=>{l.value=e,p.value=!0};return(e,a)=>{const m=w("a-spin"),L=w("a-modal");return r(),o("div",$,[t("div",E,[t("div",K,[d(c(f),{size:32})]),t("h1",null,n(e.$t("dashboard.knowledge.title")),1),t("p",null,n(e.$t("dashboard.knowledge.description")),1)]),_.value?i("",!0):(r(),o("div",O,[(r(!0),o(F,null,M(h.value,s=>(r(),o("div",{key:s.id,class:"knowledge-card glass-card",onClick:ee=>z(s)},[t("div",I,[d(c(x),{size:24})]),t("div",S,[t("h3",j,n(s.title),1),s.description?(r(),o("p",q,n(s.description),1)):i("",!0),t("div",R,[t("span",U,[d(c(B),{size:14}),T(" "+n(b(s.updated_at||s.created_at)),1)]),s.category?(r(),o("span",G,n(s.category),1)):i("",!0)])]),t("div",J,[d(c(D),{size:20})])],8,H))),128))])),_.value?(r(),o("div",P,[d(m,{size:"large"})])):i("",!0),!_.value&&h.value.length===0?(r(),o("div",Q,[a[1]||(a[1]=t("div",{class:"empty-icon"},"ðŸ“š",-1)),t("p",null,n(e.$t("dashboard.knowledge.noContent")),1)])):i("",!0),d(L,{visible:p.value,"onUpdate:visible":a[0]||(a[0]=s=>p.value=s),footer:null,width:800,centered:"",class:"knowledge-modal"},{title:y(()=>{var s;return[t("div",W,[d(c(f),{size:20}),t("span",null,n((s=l.value)==null?void 0:s.title),1)])]}),default:y(()=>[t("div",{class:"modal-content markdown-body",innerHTML:C.value},null,8,X)]),_:1},8,["visible"])])}}},le=V(Y,[["__scopeId","data-v-29b032bc"]]);export{le as default};
